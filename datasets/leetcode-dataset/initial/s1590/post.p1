Preconditions:
The input array `nums` is not null.
The input array `nums` is not empty.
The input integer `p` is a positive integer.

Postconditions:
The method returns an integer value representing the length of the smallest subarray that needs to be removed.
If it is impossible to remove a subarray such that the sum of the remaining elements is divisible by `p`, the method returns -1.