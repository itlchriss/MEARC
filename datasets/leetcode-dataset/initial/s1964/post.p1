Preconditions:
- The input array `obstacles` is not null.
- The input array `obstacles` is not empty.

Postconditions:
- The output array `ans` is not null.
- The length of the output array `ans` is equal to the length of the input array `obstacles`.
- For each index `i` in the output array `ans`, `ans[i]` is the length of the longest obstacle course for index `i` in the input array `obstacles`.