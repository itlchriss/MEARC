Count the number of contiguous non-empty subarrays in the integer array `nums` that have a maximum element within the range `[left, right]`. The result should be an integer.
