Preconditions:
- The input array `nums` is not null.
- The length of the input array `nums` is greater than 0.
- The elements in the input array `nums` are positive integers.
- The input integer `p` is a positive integer.

Postconditions:
- The returned value is an integer.
- The returned value is the length of the smallest subarray that needs to be removed.
- If it is impossible to remove a subarray such that the sum of the remaining elements is divisible by `p`, the returned value is -1.