Preconditions:
- The input integer `n` represents the number of cities in the infrastructure.
- The input array `roads` represents the bidirectional roads connecting the cities.
- Each element `roads[i]` is an array of size 2, representing a road between cities `a` and `b`.
- The values of `a` and `b` are integers between 0 and `n-1`.
- Each pair of cities has at most one road connecting them.

Postconditions:
- The method returns an integer representing the maximal network rank of the entire infrastructure.
- The network rank of two different cities is defined as the total number of directly connected roads to either city.
- If a road is directly connected to both cities, it is only counted once.
- The maximal network rank is the maximum network rank of all pairs of different cities.